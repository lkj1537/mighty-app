<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mighty Master</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-active { border: 3px solid #3b82f6; background-color: #eff6ff; }
        body { background-color: #f3f4f6; }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-lg p-4">
        <header class="text-center py-4 border-b">
            <h1 class="text-2xl font-bold text-gray-800">ğŸƒ Mighty Assistant</h1>
        </header>

        <section class="mt-6">
            <h2 class="text-lg font-semibold mb-3">1. ê²Œì„ ì„¤ì •</h2>
            <div class="grid grid-cols-2 gap-2 mb-4">
                <input v-model="formData.dealer" class="border p-2 rounded" placeholder="ì£¼ê³µ ì´ë¦„">
                <input v-model="formData.friend" class="border p-2 rounded" placeholder="í”„ë Œë“œ (ì—†ìœ¼ë©´ ë…¸í”„)">
            </div>
            
            <div class="flex justify-between gap-1 mb-4">
                <button v-for="s in suits" :key="s.name" 
                    @click="formData.suit = s.name"
                    :class="['flex-1 py-2 rounded text-sm', formData.suit === s.name ? 'bg-blue-600 text-white' : 'bg-gray-100']">
                    {{ s.name }}
                </button>
            </div>
        </section>

        <section class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200">
            <h2 class="text-blue-800 font-bold mb-2">ğŸ’¡ í˜„ì¬ ê²Œì„ ê°€ì´ë“œ</h2>
            <div class="flex justify-around text-center">
                <div>
                    <p class="text-xs text-gray-500">ë§ˆì´í‹°</p>
                    <p class="text-xl font-bold text-red-600">{{ calculateMighty }}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500">ì¡°ì»¤ì½œ</p>
                    <p class="text-xl font-bold text-gray-800">{{ calculateJokerCall }}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500">ì•¼ë‹¹ ëª©í‘œ</p>
                    <p class="text-xl font-bold text-blue-700">{{ 21 - formData.bid }}ì¥</p>
                </div>
            </div>
        </section>

        <section class="mt-8">
            <h2 class="text-lg font-semibold mb-3">2. ê²°ê³¼ ì…ë ¥</h2>
            <div class="space-y-4">
                <div>
                    <label class="text-sm text-gray-600">ë¹„ë”© ìˆ˜: {{ formData.bid }}</label>
                    <input type="range" v-model.number="formData.bid" min="13" max="20" class="w-full">
                </div>
                <div>
                    <label class="text-sm text-gray-600">ì•¼ë‹¹ íšë“ ì ìˆ˜: {{ formData.oppScore }}</label>
                    <input type="number" v-model.number="formData.oppScore" class="w-full border p-2 rounded">
                </div>
                
                <div class="p-4 rounded-lg text-center font-bold" :class="isWin ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'">
                    ê²°ê³¼: {{ isWin ? 'ì—¬ë‹¹ ìŠ¹ë¦¬ (ì„±ê³µ)' : 'ì•¼ë‹¹ ìŠ¹ë¦¬ (íŒŒì•¡)' }}
                </div>
            </div>
        </section>

        <button @click="sendData" :disabled="loading" 
            class="w-full mt-8 py-4 bg-gray-800 text-white rounded-xl font-bold text-lg active:bg-black disabled:bg-gray-400">
            {{ loading ? 'ì €ì¥ ì¤‘...' : 'ê²Œì„ ì¢…ë£Œ ë° ë°ì´í„° ì €ì¥' }}
        </button>

        <p class="text-center mt-4 text-sm text-gray-500">{{ statusMsg }}</p>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    loading: false,
                    statusMsg: '',
                    suits: [{name:'ìŠ¤í˜ì´ë“œ'}, {name:'í•˜íŠ¸'}, {name:'ë‹¤ì´ì•„'}, {name:'í´ë¡œë²„'}, {name:'ë…¸ê¸°ë£¨'}],
                    formData: {
                        dealer: '',
                        friend: '',
                        suit: 'ìŠ¤í˜ì´ë“œ',
                        bid: 13,
                        oppScore: 0,
                        result: 'ì„±ê³µ'
                    }
                }
            },
            computed: {
                calculateMighty() {
                    if (this.formData.suit === 'ìŠ¤í˜ì´ë“œ') return 'ë‹¤ì´ì•„ A';
                    return 'ìŠ¤í˜ì´ë“œ A';
                },
                calculateJokerCall() {
                    if (this.formData.suit === 'ë…¸ê¸°ë£¨') return 'ì—†ìŒ';
                    return this.formData.suit + ' 3';
                },
                isWin() {
                    const target = 21 - this.formData.bid;
                    return this.formData.oppScore < target;
                }
            },
            methods: {
                async sendData() {
                    this.loading = true;
                    this.formData.result = this.isWin ? 'ì„±ê³µ' : 'ì‹¤íŒ¨';
                    
                    // â˜…â˜…â˜… ë³¸ì¸ì˜ GAS URLë¡œ êµì²´í•˜ì„¸ìš” â˜…â˜…â˜…
                    const GAS_URL = "ì—¬ê¸°ì—_ì„±ê³µí–ˆë˜_URL_ë¶™ì—¬ë„£ê¸°";

                    try {
                        await fetch(GAS_URL, {
                            method: "POST",
                            mode: "no-cors",
                            headers: { "Content-Type": "text/plain" },
                            body: JSON.stringify(this.formData)
                        });
                        this.statusMsg = "âœ… ì‹œíŠ¸ì— ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!";
                        this.formData.oppScore = 0; // ì…ë ¥ ì´ˆê¸°í™”
                    } catch (e) {
                        this.statusMsg = "âŒ ì˜¤ë¥˜: " + e.message;
                    } finally {
                        this.loading = false;
                    }
                }
            }
        }).mount('#app')
    </script>
</body>
</html>