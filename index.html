<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mighty Master</title>
    <script src="config.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; }
        .btn-suit { transition: all 0.2s; }
        .active-suit { transform: scale(1.05); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-xl flex flex-col">
        <header class="bg-gray-800 text-white py-5 px-4 text-center">
            <h1 class="text-xl font-bold tracking-widest">ğŸƒ MIGHTY ASSISTANT</h1>
            <p class="text-xs text-gray-400 mt-1">Real-time Game Tracker</p>
        </header>

        <main class="flex-grow p-4 space-y-6">
            <section>
                <h2 class="text-sm font-bold text-gray-500 mb-2">1. í”Œë ˆì´ì–´ ì„¤ì •</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div class="flex flex-col">
                        <span class="text-[10px] mb-1 ml-1 text-gray-400">ì£¼ê³µ (Dealer)</span>
                        <input v-model="formData.dealer" class="border-2 border-gray-100 p-3 rounded-lg focus:border-blue-500 outline-none" placeholder="ì´ë¦„ ì…ë ¥">
                    </div>
                    <div class="flex flex-col">
                        <span class="text-[10px] mb-1 ml-1 text-gray-400">í”„ë Œë“œ (Friend)</span>
                        <input v-model="formData.friend" class="border-2 border-gray-100 p-3 rounded-lg focus:border-blue-500 outline-none" placeholder="ì—†ìœ¼ë©´ ê³µë°±">
                    </div>
                </div>
            </section>

            <section>
                <h2 class="text-sm font-bold text-gray-500 mb-2">2. ê¸°ë£¨(Trump) ì„ íƒ</h2>
                <div class="flex justify-between gap-1">
                    <button v-for="s in suits" :key="s.name" 
                        @click="formData.suit = s.name"
                        :class="['btn-suit flex-1 py-3 rounded-lg text-sm font-bold border', 
                                formData.suit === s.name ? 'bg-blue-600 text-white border-blue-600 active-suit' : 'bg-white text-gray-600 border-gray-200']">
                        {{ s.name }}
                    </button>
                </div>
            </section>

            <section class="bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-2xl border border-blue-100 shadow-inner">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-blue-800 font-bold text-sm">ğŸ’¡ ì‹¤ì‹œê°„ ê°€ì´ë“œ</span>
                    <span class="bg-blue-200 text-blue-800 text-[10px] px-2 py-1 rounded-full font-bold">LIVE</span>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <div class="bg-white p-3 rounded-xl shadow-sm">
                        <p class="text-[10px] text-gray-400 mb-1">ë§ˆì´í‹°</p>
                        <p class="text-base font-black text-red-600">{{ calculateMighty }}</p>
                    </div>
                    <div class="bg-white p-3 rounded-xl shadow-sm">
                        <p class="text-[10px] text-gray-400 mb-1">ì¡°ì»¤ì½œ</p>
                        <p class="text-base font-black text-gray-800">{{ calculateJokerCall }}</p>
                    </div>
                    <div class="bg-white p-3 rounded-xl shadow-sm">
                        <p class="text-[10px] text-gray-400 mb-1">ì•¼ë‹¹ ëª©í‘œ</p>
                        <p class="text-base font-black text-blue-700">{{ 21 - formData.bid }}ì¥</p>
                    </div>
                </div>
            </section>

            <section class="space-y-4">
                <h2 class="text-sm font-bold text-gray-500">3. ê²Œì„ ê²°ê³¼</h2>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="mb-4">
                        <div class="flex justify-between mb-2">
                            <label class="text-xs font-bold">ë¹„ë”© (Bidding): <span class="text-blue-600 text-lg">{{ formData.bid }}</span></label>
                        </div>
                        <input type="range" v-model.number="formData.bid" min="13" max="20" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                    </div>
                    <div>
                        <label class="text-xs font-bold block mb-2">ì•¼ë‹¹ì´ ë¨¹ì€ ì ìˆ˜íŒ ìˆ˜</label>
                        <input type="number" v-model.number="formData.oppScore" class="w-full border-2 border-gray-200 p-3 rounded-lg focus:border-blue-500 outline-none" placeholder="0~20 ì…ë ¥">
                    </div>
                </div>

                <div :class="['p-4 rounded-xl text-center font-black transition-colors', 
                             isWin ? 'bg-green-100 text-green-700 border-2 border-green-200' : 'bg-red-100 text-red-700 border-2 border-red-200']">
                    {{ isWin ? 'ğŸ† ì—¬ë‹¹ ìŠ¹ë¦¬ (ì„±ê³µ)' : 'ğŸ’€ ì•¼ë‹¹ ìŠ¹ë¦¬ (íŒŒì•¡)' }}
                </div>
            </section>
        </main>

        <footer class="p-4 bg-white border-t">
            <button @click="sendData" :disabled="loading || !formData.dealer" 
                class="w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-lg shadow-lg active:scale-95 transition-transform disabled:bg-gray-300">
                {{ loading ? 'ë°ì´í„° ì „ì†¡ ì¤‘...' : 'ë°ì´í„° ì €ì¥ ë° ì¢…ë£Œ' }}
            </button>
            <p v-if="statusMsg" class="text-center mt-3 text-sm font-bold text-blue-600">{{ statusMsg }}</p>
        </footer>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    loading: false,
                    statusMsg: '',
                    suits: [{name:'ìŠ¤í˜ì´ë“œ'}, {name:'í•˜íŠ¸'}, {name:'ë‹¤ì´ì•„'}, {name:'í´ë¡œë²„'}, {name:'ë…¸ê¸°ë£¨'}],
                    formData: {
                        dealer: '',
                        friend: '',
                        suit: 'ìŠ¤í˜ì´ë“œ',
                        bid: 13,
                        oppScore: 0,
                        result: 'ì„±ê³µ'
                    }
                }
            },
            computed: {
                calculateMighty() {
                    // ê¸°ë£¨ê°€ ìŠ¤í˜ì´ë“œë©´ ë‹¤ì´ì•„A, ì•„ë‹ˆë©´ ìŠ¤í˜ì´ë“œA
                    if (this.formData.suit === 'ìŠ¤í˜ì´ë“œ') return 'â™¦ A';
                    return 'â™  A';
                },
                calculateJokerCall() {
                    if (this.formData.suit === 'ë…¸ê¸°ë£¨') return 'ì—†ìŒ';
                    const icons = {'ìŠ¤í˜ì´ë“œ':'â™ ','í•˜íŠ¸':'â™¥','ë‹¤ì´ì•„':'â™¦','í´ë¡œë²„':'â™£'};
                    return (icons[this.formData.suit] || '') + ' 3';
                },
                isWin() {
                    // ì•¼ë‹¹ì´ (21 - ë¹„ë”©ìˆ˜) ë¯¸ë§Œìœ¼ë¡œ ë¨¹ì–´ì•¼ ì—¬ë‹¹ ì„±ê³µ
                    const target = 21 - this.formData.bid;
                    return this.formData.oppScore < target;
                }
            },
            methods: {
                async sendData() {
                    if (!this.formData.dealer) return alert("ì£¼ê³µ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                    
                    this.loading = true;
                    this.statusMsg = "ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤...";
                    this.formData.result = this.isWin ? 'ì„±ê³µ' : 'ì‹¤íŒ¨';
                    
                    try {
                        // config.jsì— ì •ì˜ëœ CONFIG.GAS_URL ì‚¬ìš©
                        await fetch(CONFIG.GAS_URL, {
                            method: "POST",
                            mode: "no-cors",
                            headers: { "Content-Type": "text/plain" },
                            body: JSON.stringify(this.formData)
                        });
                        
                        this.statusMsg = "âœ… ì €ì¥ ì™„ë£Œ! (ì‹œíŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”)";
                        // ì„±ê³µ ì‹œ ì…ë ¥ê°’ ì¼ë¶€ ì´ˆê¸°í™”
                        this.formData.oppScore = 0;
                        setTimeout(() => { this.statusMsg = ''; }, 3000);
                    } catch (e) {
                        this.statusMsg = "âŒ ì˜¤ë¥˜: " + e.message;
                    } finally {
                        this.loading = false;
                    }
                }
            }
        }).mount('#app')
    </script>
</body>
</html>